 ! BEGIN
! Command: "show current-config all 378 mode baseline"
! Generated by:
!   Username: "appuser"
!   Date: "2020-02-18T09:06:51.700Z"
!   Version: "9.4.0.78"
!   dbVersion: "139"
!   SEMP Schema Version: "soltr/9_4VMR"
!   Unlocked Features:
!   Router: "solace-1"

! pragma:interpreter:relaxed-db-restore

home
enable
configure

! Create All: "Message Vpns"

! Configure System: 
system topic-routing subscription-exceptions
system scaling max-connections 100
system health disk-latency-high-threshold 10000000
system health compute-latency-high-threshold 500000
system health network-latency-high-threshold 2000000
system health mate-link-latency-high-threshold 2000000

! Configure Ethernet Interfaces: 

! Configure Lag Interfaces: 

! Configure SolOsPhy Interfaces: 
! pragma:interpreter:ignore-already-exists
create interface "intf0"
! pragma:interpreter:no-ignore-already-exists
  os-physical-interface "eth0"
  exit

! Configure ip vrf: "management"
! pragma:interpreter:ignore-already-exists
ip
  vrf "management"
    create interface "intf0:1" static
! pragma:interpreter:no-ignore-already-exists
      exit
    exit
  exit

! Configure SEMP Service: 
service semp shutdown plain-text
service semp listen-port 8080
no service semp shutdown plain-text
service semp shutdown ssl
service semp listen-port 1943 ssl
no service semp shutdown ssl

! Configure SMF Service: 
service smf event connections thresholds set-percentage 80 clear-percentage 60
service smf shutdown
service smf listen-port "55555"
service smf listen-port "55003"  "compressed"
service smf listen-port "55556"  "routing"
service smf listen-port "55443"  "ssl"
no service smf shutdown

! Configure Matelink Service: 
service mate-link shutdown
service mate-link listen-port "8741"
no service mate-link shutdown

! Configure Redundancy Service: 
service redundancy shutdown
service redundancy first-listen-port "8300"
no service redundancy shutdown

! Configure SSL Service: 
service ssl event connections thresholds set-percentage 80 clear-percentage 60

! Configure WEB Service
service web-transport shutdown
service web-transport listen-port 8008
no service web-transport web-url-suffix
service web-transport listen-port "1443"  "ssl"
no service web-transport shutdown

! Configure REST Service: 
service rest event outgoing connections thresholds set-percentage 80 clear-percentage 60
no service rest incoming shutdown
no service rest outgoing shutdown

! Configure MQTT Service: 
no service mqtt shutdown

! Configure AMQP Service: 
no service amqp shutdown

! Configure HealthCheck Service: 
service health-check shutdown
service health-check listen-port "5550"
no service health-check shutdown

! Configure DNS: 

! Configure Hostname

! Configure Router Name
router-name "solace-1"

! Configure Routing
routing
  interface "intf0"
  mode multi-node-routing defer
  multi-node-routing
    shutdown
    exit
  exit

! Configure Routing MNR
routing
  multi-node-routing
    cspf
      ssl certificate-validation enforce-trusted-common-name
      ssl certificate-validation max-certificate-chain-depth 3
      ssl certificate-validation validate-certificate-date
! pragma:backup:ignore
      no ssl client-certificate certificate-file
! pragma:backup:no-ignore
      queue max-depth 20000
      queue min-msg-burst 255
      exit
    exit
  exit

! Configure Redundancy
redundancy node-type message-routing-node
redundancy switchover-mechanism hostlist
redundancy active-standby-role primary
redundancy mate-smf-port 0
redundancy mate-smf-port 0 compressed
redundancy mate-smf-port 0 ssl
no redundancy mate-link ssl
redundancy mate-link hello interval 1000
redundancy mate-link hello timeout 3000
redundancy mate-link remote port 8741
redundancy shutdown
no redundancy release-activity

! Create hardware
! Disk
! Message Spool
hardware message-spool event egress-flows thresholds set-percentage 80 clear-percentage 60
hardware message-spool event endpoints thresholds set-percentage 80 clear-percentage 60
hardware message-spool event ingress-flows thresholds set-percentage 80 clear-percentage 60
hardware message-spool event spool-usage thresholds set-percentage 80 clear-percentage 60
hardware message-spool event transacted-sessions thresholds set-percentage 80 clear-percentage 60
hardware message-spool event transactions thresholds set-percentage 80 clear-percentage 60
hardware message-spool event cache-usage thresholds set-percentage 80 clear-percentage 60
hardware message-spool event transacted-session-resources thresholds set-percentage 80 clear-percentage 60
hardware message-spool event disk-usage thresholds set-percentage 80 clear-percentage 60
hardware message-spool event spool-files thresholds set-percentage 80 clear-percentage 60
hardware message-spool event message-count thresholds set-percentage 80 clear-percentage 60
hardware message-spool event delivered-unacked thresholds set-percentage 80 clear-percentage 60
hardware message-spool shutdown
hardware message-spool spool-sync mode "mirrored"
hardware message-spool spool-sync mirrored message-ack-timeout 10000
hardware message-spool spool-sync mirrored spool-file-ack-timeout 10000
hardware message-spool transaction replication-compatibility-mode "legacy"
hardware message-spool max-cache-usage 10
hardware message-spool max-spool-usage 1500
no hardware message-spool shutdown

! Configure Replication
no replication interface
no replication mate virtual-router-name
replication ssl trusted-common-name "empty"
replication ssl cipher-suite "default"
replication config-sync bridge shutdown
replication config-sync bridge authentication auth-scheme "Basic"
no replication config-sync bridge compressed-data
replication config-sync bridge message-spool window-size 65535
replication config-sync bridge retry-delay 3
no replication config-sync bridge ssl
replication config-sync bridge ssl-server-certificate-validation enforce-trusted-common-name
replication config-sync bridge ssl-server-certificate-validation max-certificate-chain-depth 3
replication config-sync bridge ssl-server-certificate-validation validate-certificate-date
no replication config-sync bridge shutdown

! Configure Clock: 

! Configure Memory Event
memory-event nab-buffer-load-factor thresholds set-percentage 80 clear-percentage 60
no memory-event physical-memory thresholds
memory-event subscriptions-memory thresholds set-value 80 clear-value 60

! Configure Service: 
service event connections thresholds set-percentage 80 clear-percentage 60
no service msg-backbone shutdown

! Configure MQTT: 
mqtt retain max-memory 0

! Configure NTP Server: 

! Configure Schedule: 
no schedule backup

! Create Compression: 
compression mode optimize-for-size

! Configure SNMP: 

! Create console: 
console timeout 5
console login-banner default

! Create logging: 
logging command "CLI" mode "config"
logging command "semp-mgmt" mode "config"
logging command "semp-msgbus" mode "config"
no logging event system-tag
no logging event publish-system

! Configure SSL: 
ssl tls-session-timeout 86400
ssl cipher-suite management default
ssl cipher-suite msg-backbone default
ssl cipher-suite ssh default
no ssl allow-tls-version-1.1
ssl crime-exploit-protection
! No server-certificate was configured

! Configure Config Sync: 
config-sync authentication client-certificate max-certificate-chain-depth 3
config-sync authentication client-certificate validate-certificate-date
config-sync client-profile tcp initial-cwnd 2
config-sync client-profile tcp keepalive count 5
config-sync client-profile tcp keepalive idle 3
config-sync client-profile tcp keepalive interval 1
config-sync client-profile tcp max-wnd 256
config-sync client-profile tcp mss 1460
config-sync synchronize username
config-sync shutdown
no config-sync ssl

! Create Usernames: 
! pragma:interpreter:ignore-already-exists
create username "admin" aes-password Fn4drYzQCee60p/We1aB6pOihAcZ5+s8koWI/vcG3ZF8+0SBuE/IiHE//6lvzcMc cli uid 500 days-last-password-changed 18310
! pragma:interpreter:no-ignore-already-exists
  change-aes-password "Fn4drYzQCee60p/We1aB6pOihAcZ5+s8koWI/vcG3ZF8+0SBuE/IiHE//6lvzcMc"
  global-access-level "admin"
  exit

! Create LDAP Profile: "default"
authentication
  ldap-profile "default"
    admin dn "" aes-password "ksZ37RJJZqiwWftkJqgdUUTkBE6zMP+arO0EyCnpg+tsORn6nDl73fZbvVIgsNC5bDEnOHbW6LSdAERa6faZ3FWIbfDKCw5Y6R6PDUCOo39SxVLIsuZ+iEaiuVkJ00Si8E2QWWqW3isQO5dIoyrPYpWUzG63sUZJ7QqSrzcQuyk="
    no allow-unauthenticated-authentication
    no ldap-server index 1
    no ldap-server index 2
    no ldap-server index 3
    search base-dn ""
    search deref "always"
    search filter "(cn=$CLIENT_USERNAME)"
    search follow-continuation-references
    search scope "subtree"
    search timeout 5
    group-membership-secondary-search base-dn ""
    group-membership-secondary-search deref "always"
    group-membership-secondary-search filter-attribute-from-primary-search "dn"
    group-membership-secondary-search filter "(member=$ATTRIBUTE_VALUE_FROM_PRIMARY_SEARCH)"
    group-membership-secondary-search follow-continuation-references
    group-membership-secondary-search scope "subtree"
    group-membership-secondary-search timeout 5
    group-membership-secondary-search shutdown
    shutdown
    no tls
    exit
  exit

! Create Radius Profile: "default"
authentication
  radius-profile "default"
    no radius-server index 1
    no radius-server index 2
    no radius-server index 3
    retransmit 3
    timeout 5
    shutdown
    exit
  exit

! Create Authentication: "miscellaneous"
authentication
  replace-duplicate-client-connections
  access-level
    no elevated-message-vpn-user-mode
    default
      global-access-level "read-only"
      message-vpn
        default-access-level "none"
        exit
      exit
    ldap
      no group-membership-attribute-name
      exit
    exit
  auth-type internal
  no radius-domain
  exit
! pragma:config-sync:table-key:router:"site":2@22177088-0b24-49db-91ad-ab3681a7afc1:#self#

! Configure Management Message Vpn: 
no management-message-vpn

! Create Message Vpn: "default"
message-vpn "default"
  no alias
  authentication
    basic auth-type none
    no basic radius-domain
    no basic shutdown
    client-certificate validate-certificate-date
    no client-certificate allow-api-provided-username
    client-certificate max-certificate-chain-depth 3
    client-certificate shutdown
    client-certificate username-source "common-name"
    no oauth default-provider
    oauth shutdown
    exit
  authorization
    ldap group-membership-attribute-name "memberOf"
    no ldap trim-client-username-domain
    authorization-type internal
    exit
  bridging ssl server-certificate-validation enforce-trusted-common-name
  bridging ssl server-certificate-validation max-certificate-chain-depth 3
  bridging ssl server-certificate-validation validate-certificate-date
  distributed-cache-management
  no export-policy export-subscriptions
  max-connections 100
  max-subscriptions 500000
  no semp-over-msgbus shutdown
  no semp-over-msgbus show-cmds shutdown
  no semp-over-msgbus admin-cmds shutdown
  no semp-over-msgbus admin-cmds distributed-cache-cmds shutdown
  no semp-over-msgbus admin-cmds client-cmds shutdown
  service smf max-connections 100
  no service smf plain-text shutdown
  no service smf ssl shutdown
  service web-transport max-connections 100
  no service web-transport plain-text shutdown
  no service web-transport ssl shutdown
  service rest incoming max-connections 100
  service rest incoming listen-port 9000
  no service rest incoming plain-text shutdown
  service rest incoming listen-port 9443 ssl
  no service rest incoming ssl shutdown
  service rest mode messaging
  service rest outgoing max-connections 100
  service mqtt max-connections 100
  service mqtt listen-port 1883
  no service mqtt plain-text shutdown
  service mqtt listen-port 8883 ssl
  no service mqtt ssl shutdown
  service mqtt listen-port 8000 web
  no service mqtt websocket shutdown
  service mqtt listen-port 8443 ssl web
  no service mqtt websocket-secure shutdown
  service amqp max-connections 100
  service amqp listen-port 5672
  no service amqp plain-text shutdown
  service amqp listen-port 5671 ssl
  no service amqp ssl shutdown
  event connections thresholds set-percentage 80 clear-percentage 60
  event service smf connections thresholds set-percentage 80 clear-percentage 60
  event service web-transport connections thresholds set-percentage 80 clear-percentage 60
  event service rest incoming connections thresholds set-percentage 80 clear-percentage 60
  event service mqtt connections thresholds set-percentage 80 clear-percentage 60
  event service amqp connections thresholds set-percentage 80 clear-percentage 60
  event egress-message-rate thresholds set-value 4000000 clear-value 3000000
  event ingress-message-rate thresholds set-value 4000000 clear-value 3000000
  event large-message-threshold 1024
  no event log-tag
  no event publish-client
  no event publish-message-vpn
  event publish-topic-format smf
  no event publish-subscription
  event subscriptions thresholds set-percentage 80 clear-percentage 60
  replication
    ack-propagation interval messages 20
    no ack-propagation shutdown
    transaction-replication-mode "async"
    bridge authentication auth-scheme "Basic"
    no bridge authentication basic client-username
    no bridge compressed-data
    no bridge ssl
    bridge message-spool window-size 255
    bridge retry-delay 3
    bridge unidirectional client-profile "#client-profile"
    queue max-spool-usage 1500
    queue reject-msg-to-sender-on-discard
    exit
  rest
    ssl server-certificate-validation enforce-trusted-common-name
    ssl server-certificate-validation max-certificate-chain-depth 3
    ssl server-certificate-validation validate-certificate-date
    exit
  ssl
    no allow-downgrade-to-plain-text
    exit
  dynamic-message-routing
    no shutdown
    exit
  mqtt
    retain
      max-memory -1
      exit
    exit
  exit

! Create Client Profile: "default"
client-profile "default" message-vpn "default"
  allow-bridge-connections
  allow-shared-subscriptions
  eliding delay 0
  eliding max-topics 256
  eliding shutdown
  service smf max-connections-per-client-username 100
  service web-transport inactive-timeout 30
  service web-transport max-web-payload 1000000
  service web-transport max-connections-per-client-username 100
  max-connections-per-client-username 100
  max-subscriptions 50000
  message-spool allow-guaranteed-endpoint-create
  message-spool allow-guaranteed-endpoint-create-durability "all"
  message-spool allow-guaranteed-message-receive
  message-spool allow-guaranteed-message-send
  message-spool allow-transacted-sessions
  message-spool allow-cut-through-forwarding
  message-spool max-transacted-sessions 10
  message-spool max-transactions 5000
  message-spool max-endpoints-per-client-username 1000
  message-spool max-egress-flows 1000
  message-spool max-ingress-flows 1000
  no message-spool api-queue-management copy-from-on-create
  no message-spool api-queue-management copy-from-template-on-create
  no message-spool api-topic-endpoint-management copy-from-on-create
  no message-spool api-topic-endpoint-management copy-from-template-on-create
  no message-spool reject-msg-to-sender-on-no-subscription-match
  queue "G-1"
    max-depth 20000
    min-msg-burst 255
    exit
  queue "D-1"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "D-2"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "D-3"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "C-1"
    max-depth 20000
    min-msg-burst 4
    exit
  tcp initial-cwnd 2
  tcp keepalive count 5
  tcp keepalive idle 3
  tcp keepalive interval 1
  tcp max-wnd 256
  tcp mss 1460
  event connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event service smf connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event service web-transport connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event subscriptions thresholds set-percentage 80 clear-percentage 60
  event client-provisioned-endpoint-spool-usage thresholds set-percentage 80 clear-percentage 60
  event transacted-sessions thresholds set-percentage 80 clear-percentage 60
  event transactions thresholds set-percentage 80 clear-percentage 60
  event endpoints-per-client-username thresholds set-percentage 80 clear-percentage 60
  event egress-flows thresholds set-percentage 80 clear-percentage 60
  event ingress-flows thresholds set-percentage 80 clear-percentage 60
  no replication allow-clients-when-standby
  ssl allow-downgrade-to-plain-text
  no compression shutdown
  exit

! Create Message Spool: "default"
message-spool message-vpn "default"
  max-spool-usage 1500
  max-transacted-sessions 1000
  max-transactions 5000
  max-endpoints 1000
  max-egress-flows 1000
  max-ingress-flows 1000
  event spool-usage thresholds set-percentage 80 clear-percentage 60
  event transacted-sessions thresholds set-percentage 80 clear-percentage 60
  event transactions thresholds set-percentage 80 clear-percentage 60
  event endpoints thresholds set-percentage 80 clear-percentage 60
  event egress-flows thresholds set-percentage 80 clear-percentage 60
  event ingress-flows thresholds set-percentage 80 clear-percentage 60
  exit

! Create MQTT Sessions: 

! Create MQTT Retain Cache: 

! Create Endpoints: "default"

! Create ACL Profile: "default"
acl-profile "default" message-vpn "default"
  client-connect default-action "allow"
  publish-topic default-action "allow"
  subscribe-topic default-action "allow"
  subscribe-share-name default-action "allow"
  exit

! Create Client Username: "default"
client-username "default" message-vpn "default"
  acl-profile "default"
  client-profile "default"
  no guaranteed-endpoint-permission-override
  aes-password "ksZ37RJJZqiwWftkJqgdUUTkBE6zMP+arO0EyCnpg+tsORn6nDl73fZbvVIgsNC5"
  no subscription-manager
  no shutdown
  exit

! Create JNDI: "default"
jndi message-vpn "default"
  create connection-factory "/jms/cf/default"
    property-list "messaging-properties"
      property "default-delivery-mode" "persistent"
      property "text-msg-xml-payload" "true"
      property "default-dmq-eligible" "false"
      property "default-eliding-eligible" "false"
      property "xa" "true"
      property "jmsx-user-id-enabled" "false"
      exit
    property-list "transport-properties"
      property "connect-timeout" "30000"
      property "read-timeout" "10000"
      property "reconnect-retries" "3"
      property "reconnect-retry-wait" "3000"
      property "keep-alive-enabled" "true"
      property "keep-alive-interval" "3000"
      property "keep-alive-count-max" "3"
      property "send-buffer" "65536"
      property "receive-buffer" "65536"
      property "tcp-no-delay" "true"
      property "direct-transport" "false"
      property "compression-level" "-1"
      property "port" "-1"
      property "optimize-direct" "false"
      property "msg-callback-on-io-thread" "false"
      property "connect-retries-per-host" "0"
      property "connect-retries" "0"
      exit
    property-list "ad-properties"
      property "send-ad-window-size" "255"
      property "send-ack-timer" "2000"
      property "send-max-resends" "30"
      property "receive-ad-window-size" "18"
      property "receive-ack-timer" "1000"
      property "receive-ack-threshold" "60"
      property "receive-reconnect-retries" "-1"
      property "receive-reconnect-retry-wait" "3000"
      exit
    property-list "deliver-to-one-properties"
      property "subscriber-local-priority" "1"
      property "subscriber-network-priority" "1"
      property "deliver-to-one" "false"
      property "deliver-to-one-override" "true"
      exit
    property-list "dynamic-endpoint-properties"
      property "dynamic-durables" "false"
      property "respect-ttl" "true"
      exit
    property-list "client-properties"
      no property client-id
      no property client-description
      property "allow-duplicate-client-id" "false"
      exit
    exit
  no shutdown
  exit

! Create Replay Log: "default"

! Create Oauth Providers: "default"

! Create Queue Templates: "default"

! Create Topic Endpoint Templates: "default"

! Enable Message Vpn: "default"
message-vpn "default"
  no shutdown
  replication
    state "standby"
    shutdown
    exit
! pragma:config-sync:table-key:vpn:"default":1@8ec7d01f-5567-431f-9d57-0bd66175993a:#self#
  exit
! pragma:reformatter:schema^ethIntf^ethIntfs^interface-id intfId^
! pragma:reformatter:schema^assured-delivery-config^assured-delivery-config^spoolOnInternalDisk^false^diskArrayWwn^INVALID_DISK_WWN
! pragma:reformatter:schema^cli-username^cli-usernames^username^^cli-access-level-info global-access-level^none
! pragma:reformatter:schema^ipIntf^ipIntfs^interface-id intfId^^type^invalid
! pragma:reformatter:schema^lagIntf^lagIntfs^interface-id intfId^^members^0^mode^undefined
! pragma:reformatter:schema^misc^misc^version^^hardwarePlatform^
! pragma:reformatter:schema^systemConfig^systemConfig^routingInterfaceId intfId^^replInterfaceId intfId^^unlockedFeatures^0
! pragma:reformatter:attrib^ipIntf^intf0:1^interface-id intfId^intf0:1
! pragma:reformatter:attrib^assured-delivery-config^^spoolOnInternalDisk^true
! pragma:reformatter:attrib^assured-delivery-config^^diskArrayWwn^INVALID_DISK_WWN
! pragma:reformatter:attrib^cli-username^admin^username^admin
! pragma:reformatter:attrib^cli-username^admin^cli-access-level-info global-access-level^admin
! pragma:reformatter:attrib^misc^^version^9.4.0.78
! pragma:reformatter:attrib^misc^^hardwarePlatform^24
! pragma:reformatter:attrib^systemConfig^^routingInterfaceId intfId^intf0
! pragma:reformatter:attrib^systemConfig^^replInterfaceId intfId^
! pragma:reformatter:attrib^systemConfig^^unlockedFeatures^326


! END
